{"ast":null,"code":"//async for the await (waits for response) command \nexport default async function handleSubmit(url, customCode) {\n  //check for urls\n  if (!url) {\n    alert(\"Please enter a URL\");\n    return;\n  }\n  try {\n    if (!customCode)\n      // no custom url was inputed\n      await handleRandomShotCode(url);else await handleCustomShortCode(url, customCode);\n  } catch (error) {\n    throw error;\n  }\n}\nasync function handleRandomShotCode(url) {\n  const response = await fetch(\"http://localhost:5235/api/shorten\", {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\" //tels im sending json\n    },\n    body: JSON.stringify({\n      url\n    })\n  });\n  if (!response.ok) {\n    throw new Error(`Server error: ${response.status}`);\n  }\n  const result = await response.json(); // get the response\n  console.log(\"Full response JSON:\", result);\n  console.log(\"Shortened URL:\", result.shortUrl);\n  alert(result.shortUrl);\n}\nasync function handleCustomShortCode(url, customCode) {\n  const response = await fetch(\"http://localhost:5235/api/custom/shorten\", {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      url,\n      customCode\n    })\n  });\n  if (!response.ok) {\n    if (response.status === 409) {\n      // 409 Conflict when custom code is taken\n      alert(\"This custom short code is already in use. Please choose another.\");\n    } else {\n      throw new Error(`Server error: ${response.status}`);\n    }\n  }\n  const result = await response.json(); // get the response\n  console.log(\"Full response JSON:\", result);\n  console.log(\"Shortened URL:\", result.shortUrl);\n  alert(result.shortUrl);\n}","map":{"version":3,"names":["handleSubmit","url","customCode","alert","handleRandomShotCode","handleCustomShortCode","error","response","fetch","method","headers","body","JSON","stringify","ok","Error","status","result","json","console","log","shortUrl"],"sources":["C:/Users/Hamburg/source/repos/urlshortner/frontend/src/buttonHandler.js"],"sourcesContent":["//async for the await (waits for response) command \r\nexport default async function handleSubmit(url, customCode) {\r\n\r\n    //check for urls\r\n    if (!url) {\r\n        alert(\"Please enter a URL\");\r\n        return;\r\n    }\r\n\r\n    try {\r\n        if (!customCode) // no custom url was inputed\r\n            await handleRandomShotCode(url)\r\n        else\r\n            await handleCustomShortCode(url, customCode)\r\n\r\n    } catch (error) {\r\n        throw error;\r\n    }\r\n    \r\n}\r\n\r\nasync function handleRandomShotCode(url)\r\n{\r\n    const response = await fetch(\"http://localhost:5235/api/shorten\", {\r\n        method: \"POST\",\r\n        headers: {\r\n            \"Content-Type\": \"application/json\" //tels im sending json\r\n        },\r\n        body: JSON.stringify({ url })\r\n    });\r\n\r\n    if (!response.ok) {\r\n        throw new Error(`Server error: ${response.status}`);\r\n    }\r\n\r\n    const result = await response.json(); // get the response\r\n    console.log(\"Full response JSON:\", result);\r\n    console.log(\"Shortened URL:\", result.shortUrl);\r\n    alert(result.shortUrl)\r\n}\r\n\r\n\r\nasync function handleCustomShortCode(url, customCode)\r\n{\r\n    const response = await fetch(\"http://localhost:5235/api/custom/shorten\", {\r\n        method: \"POST\",\r\n        headers: {\r\n            \"Content-Type\": \"application/json\"\r\n        },\r\n        body: JSON.stringify({ url, customCode }) \r\n    });\r\n\r\n    if (!response.ok) {\r\n        if (response.status === 409) {\r\n        // 409 Conflict when custom code is taken\r\n        alert(\"This custom short code is already in use. Please choose another.\");\r\n        } else {\r\n            throw new Error(`Server error: ${response.status}`);\r\n        }\r\n    }\r\n\r\n    const result = await response.json(); // get the response\r\n    console.log(\"Full response JSON:\", result);\r\n    console.log(\"Shortened URL:\", result.shortUrl);\r\n    alert(result.shortUrl)\r\n}"],"mappings":"AAAA;AACA,eAAe,eAAeA,YAAYA,CAACC,GAAG,EAAEC,UAAU,EAAE;EAExD;EACA,IAAI,CAACD,GAAG,EAAE;IACNE,KAAK,CAAC,oBAAoB,CAAC;IAC3B;EACJ;EAEA,IAAI;IACA,IAAI,CAACD,UAAU;MAAE;MACb,MAAME,oBAAoB,CAACH,GAAG,CAAC,MAE/B,MAAMI,qBAAqB,CAACJ,GAAG,EAAEC,UAAU,CAAC;EAEpD,CAAC,CAAC,OAAOI,KAAK,EAAE;IACZ,MAAMA,KAAK;EACf;AAEJ;AAEA,eAAeF,oBAAoBA,CAACH,GAAG,EACvC;EACI,MAAMM,QAAQ,GAAG,MAAMC,KAAK,CAAC,mCAAmC,EAAE;IAC9DC,MAAM,EAAE,MAAM;IACdC,OAAO,EAAE;MACL,cAAc,EAAE,kBAAkB,CAAC;IACvC,CAAC;IACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;MAAEZ;IAAI,CAAC;EAChC,CAAC,CAAC;EAEF,IAAI,CAACM,QAAQ,CAACO,EAAE,EAAE;IACd,MAAM,IAAIC,KAAK,CAAC,iBAAiBR,QAAQ,CAACS,MAAM,EAAE,CAAC;EACvD;EAEA,MAAMC,MAAM,GAAG,MAAMV,QAAQ,CAACW,IAAI,CAAC,CAAC,CAAC,CAAC;EACtCC,OAAO,CAACC,GAAG,CAAC,qBAAqB,EAAEH,MAAM,CAAC;EAC1CE,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAEH,MAAM,CAACI,QAAQ,CAAC;EAC9ClB,KAAK,CAACc,MAAM,CAACI,QAAQ,CAAC;AAC1B;AAGA,eAAehB,qBAAqBA,CAACJ,GAAG,EAAEC,UAAU,EACpD;EACI,MAAMK,QAAQ,GAAG,MAAMC,KAAK,CAAC,0CAA0C,EAAE;IACrEC,MAAM,EAAE,MAAM;IACdC,OAAO,EAAE;MACL,cAAc,EAAE;IACpB,CAAC;IACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;MAAEZ,GAAG;MAAEC;IAAW,CAAC;EAC5C,CAAC,CAAC;EAEF,IAAI,CAACK,QAAQ,CAACO,EAAE,EAAE;IACd,IAAIP,QAAQ,CAACS,MAAM,KAAK,GAAG,EAAE;MAC7B;MACAb,KAAK,CAAC,kEAAkE,CAAC;IACzE,CAAC,MAAM;MACH,MAAM,IAAIY,KAAK,CAAC,iBAAiBR,QAAQ,CAACS,MAAM,EAAE,CAAC;IACvD;EACJ;EAEA,MAAMC,MAAM,GAAG,MAAMV,QAAQ,CAACW,IAAI,CAAC,CAAC,CAAC,CAAC;EACtCC,OAAO,CAACC,GAAG,CAAC,qBAAqB,EAAEH,MAAM,CAAC;EAC1CE,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAEH,MAAM,CAACI,QAAQ,CAAC;EAC9ClB,KAAK,CAACc,MAAM,CAACI,QAAQ,CAAC;AAC1B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}